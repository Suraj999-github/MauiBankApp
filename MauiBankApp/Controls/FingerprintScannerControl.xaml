<?xml version="1.0" encoding="utf-8" ?>
<ContentView xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="MauiBankApp.Controls.FingerprintScannerControl"
             x:Name="this">

    <ContentView.Resources>
        <ResourceDictionary>
            <!-- Pulse animation for scanning state -->
            <Style x:Key="PulseAnimation" TargetType="Frame">
                <Setter Property="Scale" Value="1"/>
            </Style>
        </ResourceDictionary>
    </ContentView.Resources>

    <Grid>
        <!-- Background Circle -->
        <Frame CornerRadius="100"
               BackgroundColor="{Binding ScannerBackgroundColor, Source={x:Reference this}}"
               HeightRequest="200"
               WidthRequest="200"
               HorizontalOptions="Center"
               VerticalOptions="Center"
               HasShadow="True"
               Padding="0">

            <Grid>
                <!-- Animated Pulse Rings (shown during scanning) -->
                <Frame x:Name="PulseRing1"
                       CornerRadius="90"
                       BackgroundColor="Transparent"
                       BorderColor="#4CAF50"
                       HeightRequest="180"
                       WidthRequest="180"
                       HorizontalOptions="Center"
                       VerticalOptions="Center"
                       HasShadow="False"
                       Opacity="0.6"
                       IsVisible="{Binding IsScanning, Source={x:Reference this}}"/>

                <Frame x:Name="PulseRing2"
                       CornerRadius="80"
                       BackgroundColor="Transparent"
                       BorderColor="#4CAF50"
                       HeightRequest="160"
                       WidthRequest="160"
                       HorizontalOptions="Center"
                       VerticalOptions="Center"
                       HasShadow="False"
                       Opacity="0.4"
                       IsVisible="{Binding IsScanning, Source={x:Reference this}}"/>

                <Frame x:Name="PulseRing3"
                       CornerRadius="70"
                       BackgroundColor="Transparent"
                       BorderColor="#4CAF50"
                       HeightRequest="140"
                       WidthRequest="140"
                       HorizontalOptions="Center"
                       VerticalOptions="Center"
                       HasShadow="False"
                       Opacity="0.2"
                       IsVisible="{Binding IsScanning, Source={x:Reference this}}"/>

                <!-- Fingerprint Icon -->
                <Label x:Name="FingerprintIcon"
                       Text="ðŸ‘†"
                       FontSize="80"
                       HorizontalOptions="Center"
                       VerticalOptions="Center"
                       Opacity="{Binding IconOpacity, Source={x:Reference this}}"/>

                <!-- Scanning Line Effect -->
                <BoxView x:Name="ScanLine"
                         Color="#4CAF50"
                         HeightRequest="3"
                         WidthRequest="160"
                         HorizontalOptions="Center"
                         VerticalOptions="Start"
                         Opacity="0.8"
                         CornerRadius="2"
                         IsVisible="{Binding IsScanning, Source={x:Reference this}}"/>

                <!-- Success/Error Overlay -->
                <Label x:Name="StatusIcon"
                       Text="{Binding StatusIconText, Source={x:Reference this}}"
                       FontSize="60"
                       HorizontalOptions="Center"
                       VerticalOptions="Center"
                       Opacity="0"
                       IsVisible="False"/>

            </Grid>
        </Frame>

        <!-- Status Text -->
        <Label x:Name="StatusLabel"
               Text="{Binding StatusText, Source={x:Reference this}}"
               FontSize="16"
               FontAttributes="Bold"
               TextColor="{Binding StatusTextColor, Source={x:Reference this}}"
               HorizontalOptions="Center"
               VerticalOptions="End"
               Margin="0,0,0,20"
               HorizontalTextAlignment="Center"/>
    </Grid>

</ContentView>
